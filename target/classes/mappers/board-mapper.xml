<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC
"-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="boardMapper">

	<resultMap type="Board" id="resultBoard">
		<result property="depId" column="DEP_ID" />
		<result property="boardId" column="BOARD_ID" />
		<result property="empId" column="EMP_ID" />
		<result property="boardTitle" column="BOARD_TITLE" />
		<result property="boardDetail" column="BOARD_DETAIL" />
		<result property="createDate" column="CREATE_DATE" />
		<result property="modifyDate" column="MODIFY_DATE" />
		<result property="deleteDate" column="DELETE_DATE" />
		<result property="viewsNum" column="VIEWS_NUM" />
		<result property="empName" column="EMP_NAME" />
		<result property="depName" column="DEP_NAME" />
	</resultMap>
	
	<select id="selectBoardListCount" resultType="_int">
		select count(*) from board
	</select>
	
	<select id="selectBoardList" parameterType="Paging" resultMap="resultBoard">
		<![CDATA[
		select * 
		from (select rownum rnum, DEP_ID, BOARD_ID, EMP_ID, 
		           BOARD_TITLE, BOARD_DETAIL, CREATE_DATE, 
		           MODIFY_DATE, DELETE_DATE, VIEWS_NUM
		      from (select * 
		            from board
		            order by BOARD_ID desc))
		left join department using(DEP_ID)
		left join employee using(EMP_ID)
		where rnum >= 1 and rnum <= 10
		]]>
	</select>
	
	<select id="selectBoardSearch" parameterType="Paging" resultMap="resultBoard">
		<![CDATA[
		select * 
		from (select rownum rnum, DEP_ID, BOARD_ID, EMP_ID, 
				   BOARD_TITLE, BOARD_DETAIL, CREATE_DATE, 
		           MODIFY_DATE, DELETE_DATE, VIEWS_NUM 
		      from (select * from board 
		           order by BOARD_ID desc)) 
		where rnum >= #{ startRow } and rnum <= #{ endRow }
		]]>
	</select>
	
	<select id="selectBoard" parameterType="BoardKeyword" resultMap="resultBoard">
		select *
		from (select * 
		      from board
		      where emp_id = #{empId} and dep_id = #{depId} and board_id = #{boardId})
		left join department using(DEP_ID)
		left join employee using(EMP_ID)
	</select>
	
	<insert id="insertBoard" parameterType="Board">
		
	</insert>
	
	<update id="updateBoard" parameterType="_int">
		
	</update>
	
	<select id="deleteBoard" parameterType="_int">
	</select>	
	

</mapper>






